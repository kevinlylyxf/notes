### Mac

- 环境变量也是一个变量，而且是全局变量，除非在shell中写入export，只在当前shell中有用，重新启用shell就没用了，如果想一直起作用，只需要写入配置文件中，但是在linux环境下有好几个可以设置环境变量，有的是对所有用户有作用，有的是对当前用户有作用。在需要的时候可以使用它，变量的使用就是为了方便，可以将很长的一串当做一个我们定义的变量，然后通过变量来使用，简化了使用。例如PATH，我们执行程序的路径去里面寻找，然后去执行。环境变量的使用USER=lyl，HOME=/home/lyl，如果在程序中使用到当前用户，直接调用USER环境变量就可以了。环境变量的命名在程序中一般都有体现，要不然找不到。例如PATH是程序运行时的路径，在程序中要调用PATH才行，不能调用其他的环境变量，也不在其他的环境变量中寻找。
- mac终端里面没有走代理，所以curl不能使用，其他的app默认自动走代理，走的是系统的代理，所以需要设置环境变量http_proxy和https_proxy来使终端使用代理。原理是终端没有走代理，在环境中没有找到，此时设置环境变量，此环境变量在v2ray里面直接调用来使用，所以走了代理。
- proxy就是代理，前面可以设置不同的例如http，https，查看ubuntu上env可以看到有很多的proxy
- [代理的讲解](https://sites.google.com/site/2018pk/222)
- 代理服务器设置本地代理即127.0.0.1:8889意思是访问请求不直接发送出去，而是通过当前主机进行各种加密设置伪装成http发送出去
- http和socks代理的区别，http是一种协议，SOCKS是一种网络传输协议，主要用于客户端与外网服务器之间通讯的中间传递。SOCKS是"SOCKet Secure"的缩写，http代理是用来浏览网页用的，socks代理可以看成是一种全能的代理，不管是telnet、ftp还是其他被墙的网站都可以进行代理。
- SOCKS工作在比HTTP代理更低的层次：SOCKS使用握手协议来通知代理软件其客户端试图进行的连接SOCKS，然后尽可能透明地进行操作，而常规代理可能会解释和重写报头（例如，使用另一种底层协议，例如FTP；然而，HTTP代理只是将HTTP请求转发到所需的HTTP服务器）。虽然HTTP代理有不同的使用模式，CONNECT方法允许转发TCP连接；然而，SOCKS代理还可以转发UDP流量和反向代理，而HTTP代理不能。HTTP代理通常更了解HTTP协议，执行更高层次的过滤。代理是转发请求，没有加密解密过程也不需要。
- http是一种网络通信协议，当不能直接访问服务器时，通过客户端与代理服务器之间的http连接进行请求，然后代理服务器将请求发送出去，请求的数据放到代理服务器上，然后客户端从代理服务器通过http连接拿取数据。翻墙的原理是通过代理服务器将客户端的请求通过加密算法伪装成其他的http请求，翻墙涉及到加密解密过程，而且涉及到使用哪种协议进行加密解密，国外的VPS服务器返回的http请求是进过加密的，客户端不能直接使用，所以要经过本地进行解密，所以本地也相当于一个代理服务器，安装了v2ray之后有一个端口，通过这个127.0.0.1和这个端口进行通信，出来的数据就是解密完成的就可以使用了。本地的请求通过本地代理服务器来说明使用哪种加密算法，访问到VPS，VPS进行解密然后访问。长城防火墙的原理是封IP地址，比如google服务器的地址，我们自己购买的VPS地址是没有被封的。本地的请求一般不需要加密，因为封的是IP，而我们的IP是自己的可以直接连接。
- 翻墙设置代理地址为127.0.0.1，不同的协议有不同的端口，所有的请求数据通过127.0.0.1和端口跟本机进行通信，本机就相当于一个服务器，而我们安装的翻墙软件就相当于安装在服务器上的软件，软件一直在监听端口，然后获取数据，根据协议拿到数据后代理服务器也即是本机安装的软件进行加解密，然后发送出去。
- 将本机也看作一个服务器，本机是通过127.0.0.1进行通信的，本机上的软件就相当于安装在服务器上的软件。一些请求通过127.0.0.1发送到本机，本机上的软件通过加密然后发送出去，然后发送回来的数据也是先经过代理服务器然后解密，在通过127.0.0.1返还回去。安装的翻墙软件能直接经过tcp，udp发送数据，软件就直接有这个功能，服务器只是一个载体，各种功能是通过其上的软件来实现的。
- 翻墙是需要本地代理的，因为其要加密解密。代理服务器一些其他的功能例如隐藏IP，作为防火墙隔离内网与外网等不需要使用本地代理。
- http和socks一样只是一种通讯协议，http只是请求http，而socks可以响应各种请求。例如telnet、ftp等。两种在osi模型中的位置不一样，所用的技术也不一样。这两种都是放在代理服务器上的。协议就是协议，客户端将数据包装成这个协议，代理服务器使用协议得到数据，然后进行转发代理功能。
- Http工作在应用层上，而Socks工作在会话层上，且Socks代理只是简单地传递数据包，并且不必关心是何种应用协议，所以Socks5代理服务器比应用层代理服务器要快得多。 两者支持协议不同，工作环境也不同，因此也不能直接替换使用。
- http和socks代理使用的端口一般是不一样的，本地代理也是不一样的。端口的意思是找一个通道进行连接。如果使用的是http则使用一个端口，使用的是socks则使用其他端口。通过设置本地代理设置export 环境变量。设置环境变量就可以让程序通过这个环境变量调用本地端口传进来的数据进行加密解密工作。
- ubuntu设置里面网络代理关闭后，或者在软件上进行断开连接，env查看环境变量，就没有了proxy环境变量。
- mac下使用软件qv2ray设置了代理，在设置里面，但是环境变量里面没有，说明mac终端没有走代理，可以手动设置。使用export写进配置文件中。
- mac下没有ubuntu下自动设置自动取消环境变量。但是软件里面有断开连接。

---
- [mac下shell配置文件的讲解](https://zhuanlan.zhihu.com/p/34110025)
- mac下终端使用代理，但是其没有ubuntu上自动断开，所以使用命令来让终端使用代理，想要使用代理时就是proxy打开，平常没事使用unproxy关闭。
```shell
alias proxy='export all_proxy=socks5://127.0.0.1:1089 && export http_proxy=http://127.0.0.1:8889 && \
	export https_proxy=http://127.0.0.1:8889'
alias unproxy='unset all_proxy && unset http_proxy && unset https_proxy'
```
- /bin/bash -c ""其中的-c的含义是给bash shell 输入的命令，命令在双引号里面。
- mac下shell配置文件的加载有顺序/etc/profile /etc/paths ~/.bash_profile ~/.bash_login ~/.profile ~/.bashrc，/etc/profile和/etc/paths是系统级别的，系统启动就会加载，后面几个是当前用户级的环境变量，后面3个按照从前往后的顺序读取，如果~/.bash_profile文件存在，则后面的几个文件就会被忽略不读了，如果~/.bash_profile文件不存在，才会以此类推读取后面的文件。~/.bashrc没有上述规则，它是bash shell打开的时候载入的。.bash_profile这个文件在系统里面没有，没有就自己创建。zsh加载后面的几个不一样，zsh有.zprofile，相当于.bash_profile，修改的方法一样。zsh没有加载.bashrc，所以需要在.zshrc里面输入命令source ~/.bashrc
---
- mac下lyl目录在/Users/lyl，linux在/home/lyl，两者不一样，cd ～直接切换到lyl目录

### manjaro

- manjaro报错缺少运行库libcrypt.so.1时解决办法

  ```shell
  yay -S libxcrypt-compat
  ```

  
